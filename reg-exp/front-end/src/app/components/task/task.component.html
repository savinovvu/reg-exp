<main class="paddingBottom" role="main">

  <div class="jumbotron">
    <div class="container">
      <h1 class="display-8">{{task?.name}}</h1>
      <p>{{task?.description}}</p>
      <form class="form-inline form-control regExpForm" (ngSubmit)="onSubmit()">
        <label for="inputRegExp" class="sr-only">Введите регулярное выражение</label>
        <input type="text"
               id="inputRegExp"
               [(ngModel)]="regExp"
               name="regExp"
               class="form-control-plaintext col-8 regExpInput"
               placeholder="Ответ"
               required="">

        <button class="btn  btn-primary submitRegExp" type="submit" mat-button>Проверить</button>
      </form>

    </div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <h3>Условия</h3>
        <div *ngIf="task?.matchStrings?.length > 0">
          <h6>Найти строки:</h6>
          <p>{{task.matchStrings | join:','}}</p>
        </div>

        <div *ngIf="task?.excludedStrings?.length > 0">
          <h6>Исключить строки:</h6>
          <p>{{task.excludedStrings | join:','}}</p>
        </div>

        <div *ngIf="task?.requiredSubStrings?.length > 0">
          <h6>Использовать:</h6>
          <p>{{task.requiredSubStrings | join:','}}</p>
        </div>

        <div *ngIf="task?.excludedAnswers?.length > 0">
          <h6>Запрещенные ответы:</h6>
          <p>{{task.excludedAnswers | join:','}}</p>
        </div>
      </div>


      <div class="col-md-4">
        <h3>Полезные ссылки</h3>
        <ul *ngFor="let link of task?.usefulLinks">
          <li><a href={{link.link}}>{{link.description}}</a></li>
        </ul>
      </div>


      <div class="col-md-4">
        <h3>Результат проверки</h3>
        <div *ngIf="result; else notResult">
          <div *ngIf="result.success; else wrong">
            <p>Задача успешно прошла проверку</p>
          </div>

          <ng-template #wrong>
            <h6>
              Введенное выражение
            </h6>
            <div *ngIf="result.wrongMap?.Unmatch">
              <h6>{{"Unmatch"|checkWrongStatus}}</h6>
              <p>{{result.wrongMap?.Unmatch | join:','}}</p>
            </div>

            <div *ngIf="result.wrongMap?.Match">
              <h6>{{"Match"|checkWrongStatus}}</h6>
              <p>{{result.wrongMap?.Match | join:','}}</p>
            </div>

            <div *ngIf="result.wrongMap?.Unused">
              <h6>{{"Unused"|checkWrongStatus}}</h6>
              <p>{{result.wrongMap?.Unused | join:','}}</p>
            </div>

            <div *ngIf="result.wrongMap?.Equals">
              <h6>{{"Equals"|checkWrongStatus}}</h6>
              <p>{{result.wrongMap?.Equals | join:','}}</p>
            </div>

          </ng-template>

        </div>
        <ng-template #notResult>
          <p>Ничего не было отправлено на проверку</p>
        </ng-template>

      </div>
    </div>
    <div class="row">
      <div class="col-md-4">
        <p><a class="btn btn-secondary" [routerLink]="['/course',levelNumber]" role="button">« К задачам уровня</a></p>
      </div>
      <div class="col-md-4">
        <p><a class="btn btn-secondary" [routerLink]="['/usefulLinks']" role="button">Полезные ссылки »</a></p>
      </div>
      <div class="col-md-4">
        <p><a class="btn btn-secondary" (click)="nextTask()" role="button" [class.disabled]="existNextTask">Следующая задача »</a></p>
      </div>
    </div>


  </div>

</main>



